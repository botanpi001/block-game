:root{
  --grid: 36px;           /* ピース表示用セルサイズ（見た目） */
  --gap: 3px;
  --board-bg:#f7fbff;
  --grid-line:#d3e1ef;
  --silhouette:#a7c7ff;
  --piece-shadow:0 4px 12px rgba(0,0,0,.15);
}

* { box-sizing: border-box; }
html,body { height: 100%; }
body{
  margin:0;
  font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  background:#f2f4f7;
  color:#1f2937;
}

.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 14px;
  background:#fff; border-bottom:1px solid #e5e7eb;
  position:sticky; top:0; z-index:5;
}
.topbar h1{ margin:0; font-size: clamp(18px, 3.4vw, 22px); }
.controls{ display:flex; align-items:center; gap:10px; }
.controls button{
  padding:8px 10px; border:1px solid #cfd8e3; background:#fff; border-radius:10px; cursor:pointer;
}
.controls .secondary{ background:#111827; color:#fff; }

.layout{
  max-width: 1100px;
  margin: 12px auto;
  padding: 0 12px 24px;
  display:grid; grid-template-columns: 1fr; gap:14px;
}
@media (min-width: 920px){
  .layout{ grid-template-columns: minmax(520px, 1fr) 360px; align-items:start; }
}

.board-wrap{
  background:#fff; border:1px solid #e5e7eb; border-radius:16px;
  padding:12px; position:relative;
}
#board{
  width:100%; aspect-ratio: 1 / 1; /* 正方形盤面（レスポンシブ） */
  background:var(--board-bg);
  display:block; border-radius:12px; border:1px solid #e5e7eb;
  touch-action:none;
}

#toast{
  position:absolute; inset:auto 0 12px 0; margin:auto;
  width:max-content; max-width:calc(100% - 24px);
  background:#111827; color:#fff; padding:8px 12px; border-radius:999px;
  font-weight:600; font-size:14px; text-align:center;
  opacity:0; transform: translateY(8px);
  transition: .25s ease; pointer-events:none;
}
#toast.show{ opacity:1; transform: translateY(0); }

.tray-wrap{
  background:#fff; border:1px solid #e5e7eb; border-radius:16px;
  padding:12px;
}
.tray-wrap h2{ margin:6px 0 8px; font-size:16px; }
.tray{
  display:flex; flex-wrap:wrap; gap:10px; align-items:flex-start;
  min-height: calc(var(--grid)*2 + var(--gap)*2 + 6px);
  padding:8px; border:1px dashed #cbd5e1; border-radius:12px; background:#fafafa;
}

.piece{
  position:relative; cursor:grab; touch-action:none;
  display:grid; gap: var(--gap);
  padding: var(--gap);
  background: #fff; border-radius:12px; box-shadow: var(--piece-shadow);
  user-select:none; outline: none;
}
.piece.grabbing{ cursor:grabbing; opacity:.85; }

.cell{
  width: var(--grid); height: var(--grid);
  border-radius: 8px;
}

.floating-rotate{
  position: fixed; right: 16px; bottom: 16px; z-index: 20;
  width: 64px; height: 64px; border-radius: 50%;
  border: none; background: #111827; color: #fff;
  font-size: 24px; box-shadow: 0 8px 24px rgba(0,0,0,.25);
  cursor: pointer;
}

.tips{ font-size:12px; color:#6b7280; margin-top:8px; }
